(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8867],{94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(82394),i=t(21831),o=t(82684),c=t(50724),s=t(1402),u=t(97618),a=t(70613),l=t(31557),d=t(68899),f=t(28598);function h(e,n){var t=e.children,r=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var p=o.forwardRef(h),m=t(62547),x=t(82571),j=t(98464),b=t(77417),v=t(46684),g=t(70515),Z=t(53808),y=t(19183);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,h=e.afterHidden,_=e.afterWidth,k=e.afterWidthOverride,P=e.appendBreadcrumbs,C=e.before,O=e.beforeHeader,I=e.beforeWidth,S=e.breadcrumbs,E=e.children,W=e.contained,M=e.errors,N=e.headerMenuItems,R=e.headerOffset,D=e.hideAfterCompletely,F=e.mainContainerHeader,T=e.navigationItems,H=e.setAfterHidden,A=e.setAfterWidth,z=e.setBeforeWidth,B=e.setErrors,U=e.subheaderChildren,G=e.subheaderNoPadding,L=e.title,q=e.uuid,K=(0,y.i)().width,Y="dashboard_after_width_".concat(q),$="dashboard_before_width_".concat(q),X=(0,Z.U2)(Y),V=(0,Z.U2)($),J=(0,o.useRef)(null),Q=(0,o.useState)(!1),ee=Q[0],ne=Q[1],te=(0,o.useState)(null),re=te[0],ie=te[1],oe=(0,o.useMemo)((function(){return"undefined"!==typeof A||k?_:re}),[_,re,k,A]),ce=(0,o.useCallback)((function(e){var n=e;return A?A(e):ie(e),(0,Z.t8)(Y,Math.max(n,20*g.iI)),n}),[Y,A,ie]);(0,o.useEffect)((function(){t&&!oe&&ce(X?Math.max(X,20*g.iI):_)}),[]);var se=(0,o.useState)(null),ue=se[0],ae=se[1],le=(0,o.useMemo)((function(){return"undefined"!==typeof z?I:ue}),[I,ue,z]),de=(0,o.useCallback)((function(e){var n=e;return z?z(e):ae(e),(0,Z.t8)($,Math.max(n,20*g.iI)),n}),[$,z,ae]);(0,o.useEffect)((function(){C&&!le&&de(V?Math.max(V,20*g.iI):I)}),[]);var fe=(0,o.useState)(!1),he=fe[0],pe=fe[1],me=(0,o.useState)(null)[1],xe=(0,b.Z)().project,je=[];S&&je.push.apply(je,(0,i.Z)(S)),null!==S&&void 0!==S&&S.length&&!P||!xe||null!==S&&void 0!==S&&S.length||je.unshift({bold:!P,label:function(){return L}}),(0,o.useEffect)((function(){null===J||void 0===J||!J.current||ee||he||null===me||void 0===me||me(J.current.getBoundingClientRect().width)}),[ee,oe,he,le,J,me,K]),(0,o.useEffect)((function(){ee||(0,Z.t8)(Y,oe)}),[h,ee,oe,Y]),(0,o.useEffect)((function(){he||(0,Z.t8)($,le)}),[he,le,$]);var be=(0,j.Z)(_);return(0,o.useEffect)((function(){k&&be!==_&&ce(_)}),[k,_,be]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:L}),(0,f.jsx)(l.Z,{breadcrumbs:je,menuItems:N}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null===T||void 0===T?void 0:T.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(x.Z,{navigationItems:T,showMore:!0})}),(0,f.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(m.Z,{after:t,afterHeader:r,afterHeightOffset:v.Mz,afterHidden:h,afterMousedownActive:ee,afterWidth:oe,before:C,beforeHeader:O,beforeHeightOffset:v.Mz,beforeMousedownActive:he,beforeWidth:C?le:d.k1,contained:W,headerOffset:R,hideAfterCompletely:!t||!H||D,leftOffset:C?d.k1:null,mainContainerHeader:F,mainContainerRef:J,setAfterHidden:H,setAfterMousedownActive:ne,setAfterWidth:ce,setBeforeMousedownActive:pe,setBeforeWidth:de,children:[U&&(0,f.jsx)(p,{noPadding:G,children:U}),E]})})]}),M&&(0,f.jsx)(c.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===B||void 0===B?void 0:B(null)},children:(0,f.jsx)(s.Z,w(w({},M),{},{onClose:function(){return null===B||void 0===B?void 0:B(null)}}))})]})}var P=o.forwardRef(k)},53779:function(e,n,t){"use strict";t.d(n,{C:function(){return p},X$:function(){return h},eD:function(){return d}});var r=t(25976),i=t(44897),o=t(42631),c=t(70515),s=t(47041),u=t(91437),a=6.25*c.iI,l=(c.iI,100*c.iI),d=r.default.div.withConfig({displayName:"indexstyle__WindowContainerStyle",componentId:"sc-g0cszf-0"})(["border-radius:","px;width:100%;max-width:","px;z-index:101;position:absolute;overflow:hidden;top:50%;left:50%;transform:translate(-50%,-50%);",""],o.n_,l,(function(e){return"\n    box-shadow: ".concat((e.theme||i.Z).shadow.window,";\n    background-color: ").concat((e.theme||i.Z).background.panel,";\n  ")})),f=(0,r.css)(["display:flex;align-items:center;justify-content:space-between;height:","px;padding:","px ","px;",""],a,c.iI,c.cd*c.iI,(function(e){return"\n    background-color: ".concat((e.theme||i.Z).background.output,";\n  ")})),h=r.default.div.withConfig({displayName:"indexstyle__WindowHeaderStyle",componentId:"sc-g0cszf-1"})([""," border-top-left-radius:","px;border-top-right-radius:","px;",""],f,o.n_,o.n_,(function(e){return"\n    border-bottom: ".concat(o.YF,"px ").concat(o.M8," ").concat((e.theme||i.Z).borders.medium,";\n  ")})),p=r.default.div.withConfig({displayName:"indexstyle__WindowContentStyle",componentId:"sc-g0cszf-2"})(["overflow:auto;padding:","px 0;"," "," "," ",""],c.iI,s.w5,(0,u.eR)(),(function(e){return e.minMaxHeight&&"\n    max-height: ".concat(7*c.iI,"px;\n  ")}),(function(e){return!e.minMaxHeight&&"\n    max-height: calc(100vh - ".concat(6.5*a,"px);\n  ")}));r.default.div.withConfig({displayName:"indexstyle__WindowFooterStyle",componentId:"sc-g0cszf-3"})([""," justify-content:flex-end;border-bottom-left-radius:","px;border-bottom-right-radius:","px;",""],f,o.n_,o.n_,(function(e){return"\n    border-top: ".concat(o.YF,"px ").concat(o.M8," ").concat((e.theme||i.Z).borders.medium,";\n  ")})),r.default.div.withConfig({displayName:"indexstyle__InputRowStyle",componentId:"sc-g0cszf-4"})(["padding:","px ","px;",""],.75*c.iI,2*c.iI,(function(e){return"\n    border-bottom: ".concat(o.YF,"px ").concat(o.M8," ").concat((e.theme||i.Z).borders.medium,";\n  ")}))},29480:function(e,n,t){"use strict";t.d(n,{$W:function(){return l},cl:function(){return d},cv:function(){return f},dE:function(){return u},zG:function(){return a}});var r=t(25976),i=t(44897),o=t(42631),c=t(70515),s=t(47041),u=r.default.div.withConfig({displayName:"indexstyle__SectionStyle",componentId:"sc-7a1uhf-0"})(["border-radius:","px;padding:","px;",""],o.n_,c.cd*c.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).popup,";\n  ")})),a=r.default.div.withConfig({displayName:"indexstyle__DocsStyle",componentId:"sc-7a1uhf-1"})(["> div{overflow:initial;}> div img{max-width:80%;background:white;padding:1rem;max-height:20vh;}"]),l=r.default.div.withConfig({displayName:"indexstyle__CodeEditorStyle",componentId:"sc-7a1uhf-2"})(["padding-top:","px;",""],c.cd*c.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")})),d=r.default.div.withConfig({displayName:"indexstyle__TableContainerStyle",componentId:"sc-7a1uhf-3"})(["overflow:auto;max-height:90vh;width:100%;"," "," "," "," ",""],s.w5,(function(e){return e.hideHorizontalScrollbar&&"\n    overflow-x: hidden;\n  "}),(function(e){return e.width&&"\n    width: ".concat(e.width,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,";\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")})),f=r.default.div.withConfig({displayName:"indexstyle__HeaderRowStyle",componentId:"sc-7a1uhf-4"})(["padding:","px;"," "," ",""],2*c.iI,(function(e){return"\n    background-color: ".concat((e.theme||i.Z).interactive.defaultBackground,";\n    border-bottom: ").concat(o.YF,"px ").concat(o.M8," ").concat((e.theme||i.Z).borders.medium,";\n  ")}),(function(e){return e.padding&&"\n    padding: ".concat(e.padding,"px;\n  ")}),(function(e){return e.rounded&&"\n    border-top-left-radius: ".concat(o.n_,"px;\n    border-top-right-radius: ").concat(o.n_,"px;\n  ")}))},4611:function(e,n,t){"use strict";t.d(n,{f:function(){return s}});var r=t(25976),i=t(44897),o=t(70515),c=t(42631),s=r.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-0"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*o.iI,c.TR,2*o.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||i.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.leftOffset&&"\n    left: ".concat(e.leftOffset,"px;\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}))},75083:function(e,n,t){"use strict";t.d(n,{HF:function(){return o},L6:function(){return r}});var r,i=t(72473);function o(e,n,t){var o=e.owner,c=(e.roles,[{Icon:i.WorkspacesIcon,id:r.WORKSPACES,isSelected:function(){return r.WORKSPACES===t},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}]);return o&&c.push({Icon:i.WorkspacesUsersIcon,id:r.USERS,isSelected:function(){return r.USERS===t},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),c.push.apply(c,[{Icon:i.Settings,id:r.SETTINGS,isSelected:function(){return r.SETTINGS===t},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}},{Icon:i.File,id:r.FILE_BROWSER,isSelected:function(){return r.FILE_BROWSER===t},label:function(){return"File browser"},linkProps:{href:"/manage/files"}}]),c}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(r||(r={}))},59533:function(e,n,t){"use strict";var r=t(82684),i=t(94629),o=t(35686),c=t(70515),s=t(75083),u=t(50178),a=t(28598);n.Z=function(e){var n=e.before,t=e.breadcrumbs,l=void 0===t?[]:t,d=e.children,f=e.errors,h=e.headerOffset,p=e.mainContainerHeader,m=e.pageName,x=e.setErrors,j=e.subheaderChildren,b=o.ZP.statuses.list().data,v=(0,r.useMemo)((function(){var e,n;return null===b||void 0===b||null===(e=b.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.project_type}),[b]),g=(0,u.PR)()||{};return(0,a.jsx)(i.Z,{before:n,beforeWidth:n?50*c.iI:0,breadcrumbs:l,errors:f,headerOffset:h,mainContainerHeader:p,navigationItems:(0,s.HF)(g,v,m),setErrors:x,subheaderChildren:j,title:"Workspaces",uuid:"workspaces/index",children:d})}},11074:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(25976),i=t(44897),o=t(42631),c=r.default.div.withConfig({displayName:"indexstyle__PanelStyle",componentId:"sc-1rfr5wd-0"})(["border-radius:","px;"," ",""],o.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n  ")}),(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),s=t(28598);var u=function(e){var n=e.children,t=e.fullWidth,r=void 0===t||t;return(0,s.jsx)(c,{fullWidth:r,children:n})}},2182:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return te}});var r,i=t(77837),o=t(75582),c=t(38860),s=t.n(c),u=t(82684),a=t(69864),l=t(71180),d=t(50724),f=t(82394),h=t(32013),p=t(98777),m=t(89083),x=t(15338),j=t(52479),b=t(97618),v=t(55485),g=t(85854),Z=t(93369),y=t(11074),_=t(44085),w=t(38276),k=t(30160),P=t(17488),C=t(69650),O=t(35686),I=["ReadWriteOnce","ReadWriteMany","ReadOnlyMany"],S=[{label:"Workspace name",required:!0,uuid:"name"}],E=[{label:"Service account name",placeholder:"default",uuid:"service_account_name"},{label:"Ingress name",labelDescription:"If you want to add the workspace to an existing ingress, enter the name of the ingress here. Otherwise, the workspace can be accessed through the service.",placeholder:"my-ingress",uuid:"ingress_name"}],W=[{label:"Storage class name",placeholder:"default",uuid:"storage_class_name"},{label:"Storage request size (in GB)",type:"number",uuid:"storage_request_size"}],M=t(44425),N=t(72473);!function(e){e.K8S="k8s",e.ECS="ecs",e.CLOUD_RUN="cloud_run",e.EMR="emr"}(r||(r={}));var R=t(29480),D=t(79633),F=t(53779),T=t(72619),H=t(81728),A=t(89538),z=t(28598);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,f.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=function(e){var n=e.clusterType,t=e.onCancel,i=e.onCreate,c=e.project,s=(0,u.useState)(),d=s[0],B=s[1],G=(0,u.useState)(),L=G[0],q=G[1],K=(0,u.useState)(null),Y=K[0],$=K[1],X=(0,u.useState)(null),V=X[0],J=X[1],Q=(0,u.useMemo)((function(){return null===c||void 0===c?void 0:c.workspace_config_defaults}),[c]);(0,u.useEffect)((function(){if(Q&&(V||J(null===Q||void 0===Q?void 0:Q.lifecycle_config),!Y)){var e=U(U({},null===Q||void 0===Q?void 0:Q.k8s),{},{name:null===Q||void 0===Q?void 0:Q.name});$(e)}}),[Q,V,Y]);var ee=(0,a.Db)(O.ZP.workspaces.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){e.error_message?B(e.error_message):i()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;B(r),console.log(t,r)}})}}),ne=(0,o.Z)(ee,2),te=ne[0],re=ne[1].isLoading,ie=O.ZP.files.list(),oe=ie.data,ce=ie.mutate,se=(0,u.useMemo)((function(){return(null===oe||void 0===oe?void 0:oe.files)||[]}),[oe]),ue=(0,A.dd)((function(e){return(0,z.jsxs)(F.eD,{children:[(0,z.jsxs)(F.X$,{children:[(0,z.jsx)(b.Z,{alignItems:"center",children:(0,z.jsx)(k.ZP,{disableWordBreak:!0,monospace:!0,children:"Select file"})}),(0,z.jsx)(l.ZP,{iconOnly:!0,onClick:de,children:(0,z.jsx)(N.Close,{muted:!0})})]}),(0,z.jsx)(F.C,{children:(0,z.jsx)(j.Z,{disableContextMenu:!0,fetchFiles:ce,files:se,isFileDisabled:null===e||void 0===e?void 0:e.isFileDisabled,openFile:e.onFileOpen})})]})}),{},[se,ce],{background:!0,uuid:"file_selector"}),ae=(0,o.Z)(ue,2),le=ae[0],de=ae[1],fe=(0,u.useCallback)((function(e){var n=e.autoComplete,t=e.disabled,r=e.label,i=e.labelDescription,o=e.placeholder,c=e.required,s=e.type,u=e.uuid;return(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(b.Z,{flex:2,flexDirection:"column",children:[(0,z.jsx)(k.ZP,{children:r}),i&&(0,z.jsx)(k.ZP,{muted:!0,children:i})]}),(0,z.jsx)(b.Z,{flex:1}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(P.Z,{autoComplete:n,disabled:t,onChange:function(e){$((function(n){return U(U({},n),{},(0,f.Z)({},u,e.target.value))}))},placeholder:o,required:c,setContentOnMount:!0,type:s,value:(null===Y||void 0===Y?void 0:Y[u])||""})})]})})]},u)}),[Y,$]),he=(0,u.useMemo)((function(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(v.ZP,{children:(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"General"})})}),E.map((function(e){return fe(e)})),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(v.ZP,{children:(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"Volume claim params"})})}),W.map((function(e){return fe(e)})),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(b.Z,{flex:3,children:(0,z.jsx)(k.ZP,{children:"Access mode"})}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(_.Z,{fullWidth:!0,label:"Access mode",onChange:function(e){e.preventDefault(),$((function(n){return U(U({},n),{},{storage_access_mode:e.target.value})}))},placeholder:"Access mode",value:null===Y||void 0===Y?void 0:Y.storage_access_mode,children:I.map((function(e){return(0,z.jsx)("option",{value:e,children:e},e)}))})})]})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(C.Z,{checked:L,compact:!0,onCheck:function(){return q((function(e){return!e}))}}),(0,z.jsx)(w.Z,{ml:1,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"Configure container"})})]})}),(0,z.jsx)(x.Z,{muted:!0}),L&&(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsx)(R.$W,{children:(0,z.jsx)(m.Z,{autoHeight:!0,fontSize:12,language:M.t6.YAML,onChange:function(e){$((function(n){return U(U({},n),{},{container_config:e})}))},tabSize:2,value:null===Y||void 0===Y?void 0:Y.container_config,width:"100%"})})})]})}),[fe,L,Y]),pe=(0,u.useMemo)((function(){var e,n,t,r;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(v.ZP,{children:(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"Termination policy"})})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(b.Z,{flex:3,children:(0,z.jsx)(k.ZP,{children:"Enable auto termination"})}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsxs)(_.Z,{fullWidth:!0,onChange:function(e){e.preventDefault(),J((function(n){return U(U({},n),{},{termination_policy:U(U({},null===n||void 0===n?void 0:n.termination_policy),{},{enable_auto_termination:"true"===e.target.value})})}))},value:(null===V||void 0===V||null===(e=V.termination_policy)||void 0===e?void 0:e.enable_auto_termination)||"false",children:[(0,z.jsx)("option",{value:"true",children:"True"},"true"),(0,z.jsx)("option",{value:"false",children:"False"},"false")]})})]})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(b.Z,{flex:3,children:(0,z.jsx)(k.ZP,{children:"Max idle time (in seconds)"})}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(P.Z,{onChange:function(e){J((function(n){return U(U({},n),{},{termination_policy:U(U({},null===n||void 0===n?void 0:n.termination_policy),{},{max_idle_seconds:e.target.value})})}))},setContentOnMount:!0,type:"number",value:(null===V||void 0===V||null===(n=V.termination_policy)||void 0===n?void 0:n.max_idle_seconds)||""})})]})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(v.ZP,{children:(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"Pre start"})})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(b.Z,{flex:3,justifyContent:"space-between",children:[(0,z.jsx)(k.ZP,{children:"Path to pre start script"}),(0,z.jsx)(w.Z,{mr:1,children:(0,z.jsx)(l.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(){return le({isFileDisabled:function(e,n){return!n&&!e.endsWith(".py")},onFileOpen:function(e){J((function(n){return U(U({},n),{},{pre_start_script_path:e})})),de()}})},children:(0,z.jsx)(N.Folder,{})})})]}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(P.Z,{onChange:function(e){J((function(n){return U(U({},n),{},{pre_start_script_path:e.target.value})}))},placeholder:"/",setContentOnMount:!0,value:(null===V||void 0===V?void 0:V.pre_start_script_path)||""})})]})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(v.ZP,{children:(0,z.jsx)(w.Z,{ml:2,my:2,children:(0,z.jsx)(k.ZP,{bold:!0,sky:!0,children:"Post start"})})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(b.Z,{flex:3,children:(0,z.jsx)(k.ZP,{children:"Command"})}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(P.Z,{monospace:!0,onChange:function(e){J((function(n){return U(U({},n),{},{post_start:U(U({},null===n||void 0===n?void 0:n.post_start),{},{command:e.target.value})})}))},setContentOnMount:!0,value:(null===V||void 0===V||null===(t=V.post_start)||void 0===t?void 0:t.command)||""})})]})}),(0,z.jsx)(x.Z,{muted:!0}),(0,z.jsx)(w.Z,{ml:3,mr:2,my:1,children:(0,z.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(b.Z,{flex:3,justifyContent:"space-between",children:[(0,z.jsx)(k.ZP,{children:"Path to hook (optional)"}),(0,z.jsx)(w.Z,{mr:1,children:(0,z.jsx)(l.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(){return le({onFileOpen:function(e){J((function(n){return U(U({},n),{},{post_start:U(U({},null===n||void 0===n?void 0:n.post_start),{},{hook_path:e})})})),de()}})},children:(0,z.jsx)(N.Folder,{})})})]}),(0,z.jsx)(b.Z,{flex:1,children:(0,z.jsx)(P.Z,{onChange:function(e){J((function(n){return U(U({},n),{},{post_start:U(U({},null===n||void 0===n?void 0:n.post_start),{},{hook_path:e.target.value})})}))},placeholder:"/",setContentOnMount:!0,value:(null===V||void 0===V||null===(r=V.post_start)||void 0===r?void 0:r.hook_path)||""})})]})}),(0,z.jsx)(x.Z,{muted:!0})]})}),[de,V,J,le]);return(0,z.jsx)(y.Z,{children:(0,z.jsx)("div",{style:{width:"750px"},children:(0,z.jsxs)(w.Z,{p:2,children:[(0,z.jsx)(g.Z,{level:4,children:"Create workspace"}),(0,z.jsxs)("form",{children:[S.map((function(e){var n=e.autoComplete,t=e.disabled,r=e.label,i=e.required,o=e.type,c=e.uuid;return(0,z.jsx)(w.Z,{mt:2,children:(0,z.jsx)(P.Z,{autoComplete:n,disabled:t,label:r,onChange:function(e){$((function(n){return U(U({},n),{},(0,f.Z)({},c,e.target.value))}))},required:i,setContentOnMount:!0,type:o,value:(null===Y||void 0===Y?void 0:Y[c])||""})},c)})),(0,z.jsx)(w.Z,{mt:2,children:(0,z.jsxs)(h.Z,{noPaddingContent:!0,children:[n===r.K8S&&(0,z.jsx)(p.Z,{title:"Kubernetes",children:he}),(0,z.jsx)(p.Z,{title:"Lifecycle (optional)",children:pe})]})})]}),re&&(0,z.jsx)(w.Z,{mt:1,children:(0,z.jsx)(k.ZP,{small:!0,warning:!0,children:"This may take up to a few minutes... Once the service is created, it may take another 5-10 minutes for the service to be accessible."})}),!re&&d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(w.Z,{mt:1,children:(0,z.jsx)(k.ZP,{danger:!0,small:!0,children:"Failed to create instance, see error below."})}),(0,z.jsx)(w.Z,{mt:1,children:(0,z.jsx)(k.ZP,{danger:!0,small:!0,children:d})})]}),(0,z.jsx)(w.Z,{my:2,children:(0,z.jsxs)(v.ZP,{flexDirection:"row-reverse",children:[(0,z.jsx)(Z.ZP,{background:D.a$,bold:!0,inline:!0,loading:re,onClick:function(){var e=Y||{},t=e.name,r=e.container_config;if(t){var i=U({},Y);i.name=function(e){return"ecs"===n?(0,H.We)(e,"_"):(0,H.We)(e,"-")}(t),i.container_config=L&&r,te({workspace:U(U({},i),{},{cluster_type:n,lifecycle_config:V})})}else B("Please enter a valid name!")},uuid:"workspaces/create",children:"Create"}),(0,z.jsx)(w.Z,{ml:1}),(0,z.jsx)(Z.ZP,{bold:!0,inline:!0,onClick:t,uuid:"workspaces/cancel",children:"Cancel"})]})})]})})})},L=t(70374),q=t(93808),K=t(75499),Y=t(59533),$=t(42631),X=t(8059),V=t(4611),J=t(70515),Q=t(75083);function ee(e){var n=e.clusterType,t=e.fetchWorkspaces,r=e.instance,i=e.setErrors,c=(0,u.useRef)(null),s=(0,u.useState)(),f=s[0],h=s[1],p=(0,u.useState)(),m=p[0],x=p[1],j=r.name,b=(r.task_arn,{cluster_type:n}),g=(0,a.Db)(O.ZP.workspaces.useUpdate(j,b),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t(),h(!1)},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),Z=(0,o.Z)(g,1)[0],y=(0,a.Db)(O.ZP.workspaces.useDelete(j,b),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t(),h(!1)},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),_=(0,o.Z)(y,1)[0],P=(0,u.useMemo)((function(){var e=r.status,t=[{label:function(){return(0,z.jsx)(k.ZP,{children:"Delete workspace"})},onClick:function(){return x(!0)},uuid:"delete_workspace"}];return"ecs"===n&&("STOPPED"===e?t.unshift({label:function(){return(0,z.jsx)(k.ZP,{children:"Resume instance"})},onClick:function(){return Z({workspace:{action:"resume",cluster_type:n,name:r.name,task_arn:r.task_arn}})},uuid:"resume_instance"}):"RUNNING"===e&&t.unshift({label:function(){return(0,z.jsx)(k.ZP,{children:"Stop instance"})},onClick:function(){return Z({workspace:{action:"stop",cluster_type:n,name:r.name,task_arn:r.task_arn}})},uuid:"stop_instance"})),"k8s"===n&&("STOPPED"===e?t.unshift({label:function(){return(0,z.jsx)(k.ZP,{children:"Resume instance"})},onClick:function(){return Z({workspace:{action:"resume",cluster_type:n,name:r.name}})},uuid:"resume_instance"}):"RUNNING"===e&&t.unshift({label:function(){return(0,z.jsx)(k.ZP,{children:"Stop instance"})},onClick:function(){return Z({workspace:{action:"stop",cluster_type:n,name:r.name}})},uuid:"stop_instance"})),t}),[n,r,Z]);return(0,z.jsx)(z.Fragment,{children:["ecs","k8s"].includes(n)&&(0,z.jsxs)("div",{ref:c,style:{position:"relative",zIndex:"1"},children:[(0,z.jsx)(l.ZP,{iconOnly:!0,onClick:function(){return h(!f)},children:(0,z.jsx)(N.Ellipsis,{size:2*J.iI})}),(0,z.jsx)(d.Z,{disableEscape:!0,onClickOutside:function(){h(!1),x(!1)},open:f,children:m?(0,z.jsxs)(V.f,{leftOffset:30*-J.iI,topOffset:3*-J.iI,width:30*J.iI,children:[(0,z.jsx)(k.ZP,{children:"Are you sure you want to delete"}),(0,z.jsx)(k.ZP,{children:"this instance? You may not be"}),(0,z.jsx)(k.ZP,{children:"able to recover your data."}),(0,z.jsx)(w.Z,{mt:1}),(0,z.jsxs)(v.ZP,{children:[(0,z.jsx)(l.ZP,{danger:!0,onClick:_,children:"Confirm"}),(0,z.jsx)(w.Z,{ml:1}),(0,z.jsx)(l.ZP,{default:!0,onClick:function(){return x(!1)},children:"Cancel"})]})]}):(0,z.jsx)(L.Z,{items:P,left:25*-J.iI,open:f,parentRef:c,topOffset:3*-J.iI,uuid:"workspaces/more_actions",width:25*J.iI})})]})})}function ne(){var e=O.ZP.statuses.list().data,n=(0,u.useState)(null),t=n[0],r=n[1],i=(0,u.useMemo)((function(){var n,t;return(null===e||void 0===e||null===(n=e.statuses)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.instance_type)||"ecs"}),[e]),c=O.ZP.projects.list({},{revalidateOnFocus:!1}).data,s=(0,u.useMemo)((function(){var e;return null===c||void 0===c||null===(e=c.projects)||void 0===e?void 0:e[0]}),[c]),a=O.ZP.workspaces.list({cluster_type:i},{refreshInterval:1e4,revalidateOnFocus:!0}),d=a.data,f=a.mutate,h=(0,u.useMemo)((function(){var e;return null===d||void 0===d||null===(e=d.workspaces)||void 0===e?void 0:e.filter((function(e){return e.name}))}),[d]),p=(0,A.dd)((function(){return(0,z.jsx)(G,{clusterType:i,onCancel:j,onCreate:function(){f(),j()},project:s})}),{},[i,f,s],{background:!0,disableClickOutside:!0,disableEscape:!0,uuid:"configure_workspace"}),m=(0,o.Z)(p,2),x=m[0],j=m[1];return(0,z.jsx)(Y.Z,{breadcrumbs:[{bold:!0,label:function(){return"Workspaces"}}],errors:t,pageName:Q.L6.WORKSPACES,setErrors:r,subheaderChildren:(0,z.jsx)(Z.ZP,{background:X.eW,beforeElement:(0,z.jsx)(N.Add,{size:2.5*J.iI}),bold:!0,inline:!0,onClick:function(){return x()},uuid:"workspaces/new",children:"Create new workspace"}),children:(0,z.jsx)(K.Z,{columnFlex:[2,4,2,3,1,null],columns:[{uuid:"Status"},{uuid:"Instance Name"},{uuid:"Type"},{uuid:"URL/IP"},{uuid:"Open"},{label:function(){return""},uuid:"Actions"}],rows:null===h||void 0===h?void 0:h.map((function(e){var n=e.instance,t=e.url,o=n.ip,c=n.name,s=n.status,u=n.type,a=t||o,d=a;return a&&!a.includes("http")&&(d="http://".concat(a),"ecs"===i&&(d="http://".concat(a,":6789"))),[(0,z.jsx)(l.ZP,{borderRadius:"".concat($.D7,"px"),danger:"STOPPED"===s,default:"PROVISIONING"===s,notClickable:!0,padding:"6px",primary:"RUNNING"===s,warning:"PENDING"===s,children:(0,H.vg)(s)},"status"),(0,z.jsx)(k.ZP,{children:c},"name"),(0,z.jsx)(k.ZP,{children:(0,H.vg)(u)},"type"),(0,z.jsx)(k.ZP,{children:a||"N/A"},"ip"),(0,z.jsx)(l.ZP,{disabled:!a,iconOnly:!0,onClick:function(){return window.open(d)},children:(0,z.jsx)(N.Expand,{size:2*J.iI})},"open_button"),(0,z.jsx)(ee,{clusterType:i,fetchWorkspaces:f,instance:n,setErrors:r},"more_actions")]}))})})}ne.getInitialProps=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var te=(0,q.Z)(ne)},13157:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return t(2182)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(12539),i=t(80022);function o(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,n,t){"use strict";function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[6085,7011,1557,8038,2479,9774,2888,179],(function(){return n=13157,e(e.s=n);var n}));var n=e.O();_N_E=n}]);