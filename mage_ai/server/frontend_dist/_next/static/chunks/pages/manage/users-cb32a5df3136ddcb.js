(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1911],{94629:function(e,r,t){"use strict";t.d(r,{Z:function(){return E}});var n=t(82394),i=t(21831),o=t(82684),u=t(50724),s=t(1402),c=t(97618),a=t(70613),f=t(31557),d=t(68899),l=t(28598);function p(e,r){var t=e.children,n=e.noPadding;return(0,l.jsx)(d.HS,{noPadding:n,ref:r,children:t})}var h=o.forwardRef(p),b=t(62547),v=t(82571),m=t(98464),O=t(77417),j=t(46684),w=t(70515),g=t(53808),P=t(19183);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _(e,r){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,n=e.afterHeader,p=e.afterHidden,y=e.afterWidth,_=e.afterWidthOverride,E=e.appendBreadcrumbs,Z=e.before,x=e.beforeHeader,I=e.beforeWidth,k=e.breadcrumbs,R=e.children,C=e.contained,W=e.errors,M=e.headerMenuItems,H=e.headerOffset,A=e.hideAfterCompletely,B=e.mainContainerHeader,N=e.navigationItems,F=e.setAfterHidden,T=e.setAfterWidth,U=e.setBeforeWidth,D=e.setErrors,L=e.subheaderChildren,G=e.subheaderNoPadding,K=e.title,X=e.uuid,z=(0,P.i)().width,V="dashboard_after_width_".concat(X),q="dashboard_before_width_".concat(X),J=Math.max((0,g.U2)(V,30*w.iI),30*w.iI)||30*w.iI,Q=Math.max((0,g.U2)(q,30*w.iI),30*w.iI)||30*w.iI,Y=(0,o.useRef)(null),$=(0,o.useState)(!1),ee=$[0],re=$[1],te=(0,o.useState)(null),ne=te[0],ie=te[1],oe=(0,o.useMemo)((function(){return"undefined"!==typeof T||_?y:ne}),[y,ne,_,T]),ue=(0,o.useCallback)((function(e){var r=e;return T?T(e):ie(e),(0,g.t8)(V,Math.max(r,20*w.iI)),r}),[V,T,ie]);(0,o.useEffect)((function(){t&&!oe&&ue(J?Math.max(J,20*w.iI):y)}),[]);var se=(0,o.useState)(null),ce=se[0],ae=se[1],fe=(0,o.useMemo)((function(){return"undefined"!==typeof U?I:ce}),[I,ce,U]),de=(0,o.useCallback)((function(e){var r=e;return U?U(e):ae(e),(0,g.t8)(q,Math.max(r,20*w.iI)),r}),[q,U,ae]);(0,o.useEffect)((function(){Z&&!fe&&de(Q?Math.max(Q,20*w.iI):I)}),[]);var le=(0,o.useState)(!1),pe=le[0],he=le[1],be=(0,o.useState)(null)[1],ve=(0,O.Z)().project,me=[];k&&me.push.apply(me,(0,i.Z)(k)),null!==k&&void 0!==k&&k.length&&!E||!ve||null!==k&&void 0!==k&&k.length||me.unshift({bold:!E,label:function(){return K}}),(0,o.useEffect)((function(){null===Y||void 0===Y||!Y.current||ee||pe||null===be||void 0===be||be(Y.current.getBoundingClientRect().width)}),[ee,oe,pe,fe,Y,be,z]),(0,o.useEffect)((function(){ee||(0,g.t8)(V,oe)}),[p,ee,oe,V]),(0,o.useEffect)((function(){pe||(0,g.t8)(q,fe)}),[pe,fe,q]);var Oe=(0,m.Z)(y);return(0,o.useEffect)((function(){_&&Oe!==y&&ue(y)}),[_,y,Oe]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{title:K}),(0,l.jsx)(f.Z,{breadcrumbs:me,menuItems:M}),(0,l.jsxs)(d.Nk,{ref:r,children:[0!==(null===N||void 0===N?void 0:N.length)&&(0,l.jsx)(d.lm,{showMore:!0,children:(0,l.jsx)(v.Z,{navigationItems:N,showMore:!0})}),(0,l.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,l.jsxs)(b.Z,{after:t,afterHeader:n,afterHeightOffset:j.Mz,afterHidden:p,afterMousedownActive:ee,afterWidth:oe,before:Z,beforeHeader:x,beforeHeightOffset:j.Mz,beforeMousedownActive:pe,beforeWidth:Z?fe:d.k1,contained:C,headerOffset:H,hideAfterCompletely:!t||!F||A,leftOffset:Z?d.k1:null,mainContainerHeader:B,mainContainerRef:Y,setAfterHidden:F,setAfterMousedownActive:re,setAfterWidth:ue,setBeforeMousedownActive:he,setBeforeWidth:de,children:[L&&(0,l.jsx)(h,{noPadding:G,children:L}),R]})})]}),W&&(0,l.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===D||void 0===D?void 0:D(null)},children:(0,l.jsx)(s.Z,S(S({},W),{},{onClose:function(){return null===D||void 0===D?void 0:D(null)}}))})]})}var E=o.forwardRef(_)},75083:function(e,r,t){"use strict";t.d(r,{HF:function(){return o},L6:function(){return n}});var n,i=t(72473);function o(e,r,t){var o=e.owner,u=(e.roles,[{Icon:i.WorkspacesIcon,id:n.WORKSPACES,isSelected:function(){return n.WORKSPACES===t},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}]);return o&&u.push({Icon:i.WorkspacesUsersIcon,id:n.USERS,isSelected:function(){return n.USERS===t},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),u.push.apply(u,[{Icon:i.Settings,id:n.SETTINGS,isSelected:function(){return n.SETTINGS===t},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}},{Icon:i.File,id:n.FILE_BROWSER,isSelected:function(){return n.FILE_BROWSER===t},label:function(){return"File browser"},linkProps:{href:"/manage/files"}}]),u}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(n||(n={}))},59533:function(e,r,t){"use strict";var n=t(82684),i=t(94629),o=t(35686),u=t(70515),s=t(75083),c=t(50178),a=t(28598);r.Z=function(e){var r=e.before,t=e.breadcrumbs,f=void 0===t?[]:t,d=e.children,l=e.errors,p=e.headerOffset,h=e.mainContainerHeader,b=e.pageName,v=e.setErrors,m=e.subheaderChildren,O=o.ZP.statuses.list().data,j=(0,n.useMemo)((function(){var e,r;return null===O||void 0===O||null===(e=O.statuses)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.project_type}),[O]),w=(0,c.PR)()||{};return(0,a.jsx)(i.Z,{before:r,beforeWidth:r?50*u.iI:0,breadcrumbs:f,errors:l,headerOffset:p,mainContainerHeader:h,navigationItems:(0,s.HF)(w,j,b),setErrors:v,subheaderChildren:m,title:"Workspaces",uuid:"workspaces/index",children:d})}},12222:function(e,r,t){"use strict";t.r(r);var n=t(77837),i=t(82394),o=t(38860),u=t.n(o),s=t(82684),c=t(34376),a=t(71180),f=t(85854),d=t(93808),l=t(38276),p=t(75499),h=t(30160),b=t(59533),v=t(35686),m=t(98464),O=t(72473),j=t(70515),w=t(75083),g=t(72619),P=t(50178),y=t(42122),S=t(69419),_=t(28598);function E(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?E(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function x(){var e=(0,c.useRouter)(),r=(0,s.useState)(null),t=r[0],n=r[1],i=((0,P.PR)()||{}).owner,o=(0,s.useState)(null),u=o[0],d=o[1],E=v.ZP.users.list({},{revalidateOnFocus:!1}),x=E.data;E.mutate;(0,s.useEffect)((function(){(0,g.bB)(x,n)}),[x]);var I=(0,s.useMemo)((function(){return(null===x||void 0===x?void 0:x.users)||[]}),[null===x||void 0===x?void 0:x.users]),k=v.ZP.users.detail(null===u||void 0===u?void 0:u.user_id,{},{revalidateOnFocus:!1}),R=k.data;k.mutate;(0,s.useEffect)((function(){(0,g.bB)(R,n)}),[R]);var C=null===R||void 0===R?void 0:R.user,W=(0,S.iV)(),M=(0,m.Z)(W);return(0,s.useEffect)((function(){var e=W.add_new_user,r=W.user_id;if(!(0,y.Xy)(W,M)){var t=Z(Z({},M),W);r?t.user_id=r:delete t.user_id,e?t.add_new_user=e:delete t.add_new_user,d(t)}}),[W,M]),(0,_.jsxs)(b.Z,{breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"Users"}}],errors:t,pageName:w.L6.USERS,children:[i&&(0,_.jsx)(l.Z,{p:j.cd,children:(0,_.jsx)(a.ZP,{beforeIcon:(0,_.jsx)(O.Add,{}),onClick:function(){return e.push("/manage/users/new")},primary:!0,children:"Add new user"})}),(0,_.jsx)(l.Z,{p:j.cd,children:(0,_.jsx)(f.Z,{children:"Users"})}),(0,_.jsx)(p.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=I[e])||void 0===r?void 0:r.id)===(null===C||void 0===C?void 0:C.id)},onClickRow:function(r){var t,n=null===(t=I[r])||void 0===t?void 0:t.id;e.push("/manage/users/[user]","/manage/users/".concat(n))},rows:I.map((function(e){var r=e.email,t=e.roles_display,n=e.roles_new,i=e.username;return[(0,_.jsx)(h.ZP,{bold:!0,children:i},"username"),(0,_.jsx)(h.ZP,{default:!0,children:r},"email"),(0,_.jsx)(h.ZP,{default:!0,children:n&&n[0]?n[0].name:t},"roles")]})),uuid:"pipeline-runs"})]})}x.getInitialProps=(0,n.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,d.Z)(x)},72695:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return t(12222)}])},80022:function(e,r,t){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(r,{Z:function(){return n}})},15544:function(e,r,t){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.d(r,{Z:function(){return n}})},13692:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(61049);function i(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&(0,n.Z)(e,r)}},93189:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(12539),i=t(80022);function o(e,r){if(r&&("object"===n(r)||"function"===typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,r,t){"use strict";function n(e,r){return n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},n(e,r)}t.d(r,{Z:function(){return n}})}},function(e){e.O(0,[6085,1557,8038,9774,2888,179],(function(){return r=72695,e(e.s=r);var r}));var r=e.O();_N_E=r}]);