(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9015],{65557:function(e,n,t){"use strict";var r=t(21831),i=t(75582),o=t(82684),u=t(49555);n.Z=function(e){var n=e.children,t=e.uuid,s=e.uuids,c=void 0===s?[]:s,a=(0,u.j)("apiReloads"),l=(0,i.Z)(a,1)[0],d=(0,r.Z)(c);t&&d.push(t);var f=d.map((function(e){return String(l[e])||"-"})).join("_");return o.cloneElement(n,{key:f})}},94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var r=t(82394),i=t(21831),o=t(82684),u=t(50724),s=t(1402),c=t(97618),a=t(70613),l=t(31557),d=t(68899),f=t(28598);function h(e,n){var t=e.children,r=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var p=o.forwardRef(h),b=t(62547),v=t(82571),m=t(98464),g=t(77417),x=t(46684),j=t(70515),y=t(53808),C=t(19183);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,h=e.afterHidden,O=e.afterWidth,w=e.afterWidthOverride,Z=e.appendBreadcrumbs,k=e.before,S=e.beforeHeader,I=e.beforeWidth,_=e.breadcrumbs,E=e.children,T=e.contained,R=e.errors,F=e.headerMenuItems,H=e.headerOffset,W=e.hideAfterCompletely,M=e.mainContainerHeader,A=e.navigationItems,N=e.setAfterHidden,B=e.setAfterWidth,U=e.setBeforeWidth,z=e.setErrors,D=e.subheaderChildren,L=e.subheaderNoPadding,G=e.title,K=e.uuid,V=(0,C.i)().width,X="dashboard_after_width_".concat(K),q="dashboard_before_width_".concat(K),$=Math.max((0,y.U2)(X,30*j.iI),30*j.iI)||30*j.iI,J=Math.max((0,y.U2)(q,30*j.iI),30*j.iI)||30*j.iI,Q=(0,o.useRef)(null),Y=(0,o.useState)(!1),ee=Y[0],ne=Y[1],te=(0,o.useState)(null),re=te[0],ie=te[1],oe=(0,o.useMemo)((function(){return"undefined"!==typeof B||w?O:re}),[O,re,w,B]),ue=(0,o.useCallback)((function(e){var n=e;return B?B(e):ie(e),(0,y.t8)(X,Math.max(n,20*j.iI)),n}),[X,B,ie]);(0,o.useEffect)((function(){t&&!oe&&ue($?Math.max($,20*j.iI):O)}),[]);var se=(0,o.useState)(null),ce=se[0],ae=se[1],le=(0,o.useMemo)((function(){return"undefined"!==typeof U?I:ce}),[I,ce,U]),de=(0,o.useCallback)((function(e){var n=e;return U?U(e):ae(e),(0,y.t8)(q,Math.max(n,20*j.iI)),n}),[q,U,ae]);(0,o.useEffect)((function(){k&&!le&&de(J?Math.max(J,20*j.iI):I)}),[]);var fe=(0,o.useState)(!1),he=fe[0],pe=fe[1],be=(0,o.useState)(null)[1],ve=(0,g.Z)().project,me=[];_&&me.push.apply(me,(0,i.Z)(_)),null!==_&&void 0!==_&&_.length&&!Z||!ve||null!==_&&void 0!==_&&_.length||me.unshift({bold:!Z,label:function(){return G}}),(0,o.useEffect)((function(){null===Q||void 0===Q||!Q.current||ee||he||null===be||void 0===be||be(Q.current.getBoundingClientRect().width)}),[ee,oe,he,le,Q,be,V]),(0,o.useEffect)((function(){ee||(0,y.t8)(X,oe)}),[h,ee,oe,X]),(0,o.useEffect)((function(){he||(0,y.t8)(q,le)}),[he,le,q]);var ge=(0,m.Z)(O);return(0,o.useEffect)((function(){w&&ge!==O&&ue(O)}),[w,O,ge]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:G}),(0,f.jsx)(l.Z,{breadcrumbs:me,menuItems:F}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null===A||void 0===A?void 0:A.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(v.Z,{navigationItems:A,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(b.Z,{after:t,afterHeader:r,afterHeightOffset:x.Mz,afterHidden:h,afterMousedownActive:ee,afterWidth:oe,before:k,beforeHeader:S,beforeHeightOffset:x.Mz,beforeMousedownActive:he,beforeWidth:k?le:d.k1,contained:T,headerOffset:H,hideAfterCompletely:!t||!N||W,leftOffset:k?d.k1:null,mainContainerHeader:M,mainContainerRef:Q,setAfterHidden:N,setAfterMousedownActive:ne,setAfterWidth:ue,setBeforeMousedownActive:pe,setBeforeWidth:de,children:[D&&(0,f.jsx)(p,{noPadding:L,children:D}),E]})})]}),R&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===z||void 0===z?void 0:z(null)},children:(0,f.jsx)(s.Z,P(P({},R),{},{onClose:function(){return null===z||void 0===z?void 0:z(null)}}))})]})}var Z=o.forwardRef(w)},90758:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var r=t(82394),i=t(26304),o=t(82684),u=t(25976),s=t(39867),c=t(55485),a=t(48670),l=t(38276),d=t(30160),f=t(12468),h=t(44897),p=t(79899),b=t(72473),v=t(97133),m=t(70515),g=t(15610),x=t(95924),j=t(28598),y=1.25*m.iI;var C=function(e){var n=e.filePath,t=e.filesTouched,r=void 0===t?{}:t,i=e.isLast,u=e.onClickTab,C=e.onClickTabClose,O=e.renderTabTitle,P=e.savePipelineContent,w=e.selected,Z=e.themeContext,k=(0,o.useState)(!1),S=k[0],I=k[1],_=(0,p.Z)({filePath:n,name:n,uuid:n}),E=_.BlockIcon,T=_.Icon,R=_.color,F=_.iconColor,H=_.isBlockFile;return(0,j.jsx)(c.ZP,{flexDirection:"column",fullHeight:!0,onClick:function(e){e.preventDefault(),w||(u?u(n):(null===P||void 0===P||P(),(0,g.u)({file_path:encodeURIComponent(n)})))},onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},children:(0,j.jsx)(v.Gb,{last:i,selected:w,children:(0,j.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[(0,j.jsx)(f.Z,{appearAbove:!0,appearBefore:!0,label:n,size:null,widthFitContent:!0,children:(0,j.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[!r[n]&&(0,j.jsx)(j.Fragment,{children:H?(0,j.jsx)(E,{color:R,size:1*m.iI,square:!0}):(0,j.jsx)(T,{fill:F,size:1.5*m.iI})}),r[n]&&(0,j.jsx)(f.Z,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,j.jsx)("div",{style:{padding:1},children:(0,j.jsx)(s.Z,{borderColor:(Z||h.Z).borders.danger,size:y})})}),(0,j.jsx)(l.Z,{mr:1}),(0,j.jsx)(d.ZP,{monospace:!0,muted:!w,noWrapping:!0,small:!0,children:O?O(n):n})]})}),C&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l.Z,{mr:2}),(0,j.jsx)(f.Z,{label:"Close",size:null,widthFitContent:!0,children:(0,j.jsxs)(a.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(e){(0,x.j)(e),null===C||void 0===C||C(n)},preventDefault:!0,children:[(S||w)&&(0,j.jsx)(b.Close,{muted:!w,size:y}),!S&&!w&&(0,j.jsx)("div",{style:{width:y}})]})})]})]})})})},O=t(86735),P=["filePaths","isSelectedFilePath","onClickTab","onClickTabClose","selectedFilePath","tabsBefore"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){var n=e.filePaths,t=e.isSelectedFilePath,r=e.onClickTab,s=e.onClickTabClose,a=e.selectedFilePath,l=e.tabsBefore,d=(0,i.Z)(e,P),f=(0,o.useContext)(u.ThemeContext),h=(0,o.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]),p=(0,o.useMemo)((function(){return(null===h||void 0===h?void 0:h.length)||0}),[h]);return(0,j.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"flex-start",children:[(null===l||void 0===l?void 0:l.length)>=1&&(null===l||void 0===l?void 0:l.map((function(e){var n=e.label,i=e.onClick,o=e.uuid,u=t?t(o,a):a===encodeURIComponent(o);return(0,j.jsx)(C,{onClickTab:function(){return null===i||void 0===i?void 0:i({onClickTab:r})},renderTabTitle:function(){return n?null===n||void 0===n?void 0:n():o},selected:u,themeContext:f},o)}))),null===h||void 0===h?void 0:h.map((function(e,n){var i=t?t(e,a):a===encodeURIComponent(e);return(0,o.createElement)(C,Z(Z({},d),{},{filePath:e,isLast:n===p-1,key:e,onClickTab:r,onClickTabClose:function(e){if(s)s(e);else{var n=(0,O.Od)(h,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,g.u)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})}},selected:i,themeContext:f}))}))]})}},97133:function(e,n,t){"use strict";t.d(n,{Gb:function(){return f},fm:function(){return l},lO:function(){return a},rK:function(){return d},zn:function(){return c}});var r=t(25976),i=t(44897),o=t(2842),u=t(70515),s=t(47041),c=300,a=r.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],c,c),l=r.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).codeArea,";\n  ")})),d=r.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:","px;width:100%;z-index:5;"," "," "," ",""],o.Wi,o.Wi,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).medium,";\n  ")}),(function(e){return e.relativePosition&&"\n    position: relative;\n  "}),(function(e){return e.secondary&&"\n    height: ".concat(37,"px;\n    top: ").concat(o.Wi,"px;\n    overflow-x: auto;\n    z-index: 3;\n  ")}),(0,s.y$)()),f=r.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-right:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],1*u.iI,1.5*u.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||i.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.selected&&!e.last&&"\n    border-color: ".concat((e.theme.borders||i.Z.borders).light," !important;\n  ")}));r.default.div.withConfig({displayName:"indexstyle__HeaderViewOptionsStyle",componentId:"sc-1sv9513-4"})(["left:50%;position:absolute;transform:translateX(-50%);"])},75083:function(e,n,t){"use strict";t.d(n,{HF:function(){return o},L6:function(){return r}});var r,i=t(72473);function o(e,n,t){var o=e.owner,u=(e.roles,[{Icon:i.WorkspacesIcon,id:r.WORKSPACES,isSelected:function(){return r.WORKSPACES===t},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}]);return o&&u.push({Icon:i.WorkspacesUsersIcon,id:r.USERS,isSelected:function(){return r.USERS===t},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),u.push.apply(u,[{Icon:i.Settings,id:r.SETTINGS,isSelected:function(){return r.SETTINGS===t},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}},{Icon:i.File,id:r.FILE_BROWSER,isSelected:function(){return r.FILE_BROWSER===t},label:function(){return"File browser"},linkProps:{href:"/manage/files"}}]),u}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(r||(r={}))},59533:function(e,n,t){"use strict";var r=t(82684),i=t(94629),o=t(35686),u=t(70515),s=t(75083),c=t(50178),a=t(28598);n.Z=function(e){var n=e.before,t=e.breadcrumbs,l=void 0===t?[]:t,d=e.children,f=e.errors,h=e.headerOffset,p=e.mainContainerHeader,b=e.pageName,v=e.setErrors,m=e.subheaderChildren,g=o.ZP.statuses.list().data,x=(0,r.useMemo)((function(){var e,n;return null===g||void 0===g||null===(e=g.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.project_type}),[g]),j=(0,c.PR)()||{};return(0,a.jsx)(i.Z,{before:n,beforeWidth:n?50*u.iI:0,breadcrumbs:l,errors:f,headerOffset:h,mainContainerHeader:p,navigationItems:(0,s.HF)(j,x,b),setErrors:v,subheaderChildren:m,title:"Workspaces",uuid:"workspaces/index",children:d})}},83087:function(e,n,t){"use strict";t.r(n);var r=t(77837),i=t(38860),o=t.n(i),u=t(82684),s=t(65557),c=t(52479),a=t(43449),l=t(90758),d=t(93808),f=t(38276),h=t(59533),p=t(35686),b=t(86735),v=t(15610),m=t(69419),g=t(97133),x=t(75083),j=t(28598);function y(){var e=(0,u.useState)(null),n=e[0],t=e[1],r=(0,m.iV)(),i=r.file_path,o=(0,u.useMemo)((function(){var e=r["file_paths[]"]||[];return Array.isArray(e)||(e=[e]),e}),[r]),d=(0,u.useCallback)((function(e){var n=encodeURIComponent(e),t=(0,m.iV)()["file_paths[]"]||[];Array.isArray(t)||(t=[t]),t.includes(n)||t.push(n),(0,v.u)({file_path:n,"file_paths[]":t})}),[]),y=p.ZP.files.list(),C=y.data,O=y.mutate,P=(0,u.useMemo)((function(){return(null===C||void 0===C?void 0:C.files)||[]}),[C]),w=(0,u.useRef)(null),Z=(0,u.useState)(null),k=Z[0],S=Z[1],I=(0,u.useState)([]),_=I[0],E=I[1],T=(0,u.useState)({}),R=T[0],F=T[1],H=(0,u.useMemo)((function(){return(0,j.jsx)(f.Z,{ml:1,mt:1,children:(0,j.jsx)(c.Z,{fetchFiles:O,files:P,openFile:d,ref:w,showError:t})})}),[O,P,d,t]);return(0,u.useEffect)((function(){S(i)}),[i]),(0,u.useEffect)((function(){(0,b.fS)(o,_)||E(o)}),[o,_]),(0,j.jsx)(h.Z,{before:H,breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"File browser"}}],errors:n,mainContainerHeader:(0,j.jsx)(g.rK,{secondary:!0,children:(0,j.jsx)(l.Z,{filePaths:_,filesTouched:R,selectedFilePath:k})}),pageName:x.L6.FILE_BROWSER,children:null===o||void 0===o?void 0:o.map((function(e){return(0,j.jsx)("div",{style:{display:k===e?null:"none"},children:(0,j.jsx)(s.Z,{uuid:"manage/FileEditor/".concat(decodeURIComponent(e)),children:(0,j.jsx)(a.Z,{active:k===e,filePath:e,selectedFilePath:k,setErrors:t,setFilesTouched:F})})},e)}))})}y.getInitialProps=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,d.Z)(y)},90205:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/files",function(){return t(83087)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(12539),i=t(80022);function o(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,n,t){"use strict";function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[6085,7011,1557,8038,2479,3449,9774,2888,179],(function(){return n=90205,e(e.s=n);var n}));var n=e.O();_N_E=n}]);